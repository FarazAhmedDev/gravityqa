// Inspector Mode Handlers - Add these to AutomationWizard.tsx after line 338

// INSPECTOR MODE HANDLERS
const handleInspectorHover = async (e: React.MouseEvent<HTMLImageElement>) => {
    if (recordingMode !== 'inspector') return

    const rect = e.currentTarget.getBoundingClientRect()
    const img = e.currentTarget as HTMLImageElement

    const scaleX = img.naturalWidth / img.width
    const scaleY = img.naturalHeight / img.height
    const x = Math.round((e.clientX - rect.left) * scaleX)
    const y = Math.round((e.clientY - rect.top) * scaleY)

    try {
        const res = await axios.get(`http://localhost:8000/api/inspector/element-at-position?x=${x}&y=${y}`)
        
        if (res.data.found) {
            setHoveredElement(res.data.element)
            setShowElementPanel(true)
        } else {
            setHoveredElement(null)
            setShowElementPanel(false)
        }
    } catch (error) {
        console.error('Element detection failed:', error)
    }
}

const handleInspectorClick = async (e: React.MouseEvent<HTMLImageElement>) => {
    if (recordingMode !== 'inspector' || !hoveredElement) return

    const rect = e.currentTarget.getBoundingClientRect()
    const img = e.currentTarget as HTMLImageElement

    const scaleX = img.naturalWidth / img.width
    const scaleY = img.naturalHeight / img.height
    const x = Math.round((e.clientX - rect.left) * scaleX)
    const y = Math.round((e.clientY - rect.top) * scaleY)

    const action: RecordedAction = {
        step: actions.length + 1,
        action: 'tap',
        x,
        y,
        element: hoveredElement,  // Save element properties
        description: `üîç Tap ${hoveredElement.class?.split('.').pop()} "${hoveredElement.text || hoveredElement.resource_id || 'element'}"`,
        timestamp: Date.now()
    }

    setActions([...actions, action])
    setStatus(`üîç Inspector - ${actions.length + 1} actions captured`)

    try {
        await axios.post('http://localhost:8000/api/inspector/tap-coordinate', { x, y })
    } catch (error) {
        console.error('Tap execution failed:', error)
    }
}

// Now update the screenshot img element to use these handlers:
// Add to onMouseMove: recordingMode === 'inspector' ? handleInspectorHover : handleMouseMove
// Add to onClick: recordingMode === 'inspector' ? handleInspectorClick : undefined
